(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{106:function(t,e,s){"use strict";s.r(e);var o=s(0),a=Object(o.a)({},(function(){var t=this.$createElement;this._self._c;return this._m(0)}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("p",[t._v("Here is a guide to debugging Electron App with VS Code. It uses Electron 2.0, works on all platforms, and includes instruction for debugging both Main and Renderer process.")]),s("p",[t._v("I'll be using "),s("a",{attrs:{href:"https://github.com/electron/electron-quick-start"}},[t._v("electron/electron-quick-start")]),t._v(".\nClone and open the project in VS Code. Then go to the Debug View and click the configure icon\nto make an empty "),s("code",[t._v("launch.json")]),t._v(".")]),s("p",[t._v("You can also skip this tutorial and grab the code at: "),s("a",{attrs:{href:"https://github.com/octref/vscode-electron-debug"}},[t._v("octref/vscode-electron-debug")])]),s("h2",{attrs:{id:"main-process"}},[t._v("Main Process")]),s("p",[t._v("Fill "),s("code",[t._v("launch.json")]),t._v(" with the following.")]),s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("{")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("  ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"version"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"0.2.0"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("  ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"configurations"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": [")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("    {")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"name"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"Debug Main Process"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"type"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"node"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"request"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"launch"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"cwd"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"${workspaceRoot}"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"runtimeExecutable"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"${workspaceRoot}/node_modules/.bin/electron"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"windows"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": {")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("        ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"runtimeExecutable"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"${workspaceRoot}/node_modules/.bin/electron.cmd"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      },")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"program"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"${workspaceRoot}/main.js"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"protocol"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"inspector"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("    }")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("  ]")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("}")])])])]),s("p"),s("figure",[s("img",{attrs:{src:"/debug-electron-vscode/main_process.png",alt:"Main Process"}})]),s("p"),s("p",[t._v("The setting is pretty self-explanatory, use the "),s("code",[t._v("electron")]),t._v(" in "),s("code",[t._v("node_modules")]),t._v(" to run "),s("code",[t._v("main.js")]),t._v(".\nIf you go to the Debug View and run "),s("code",[t._v("Debug Main Process")]),t._v(", you should see the code stopping\nat the breakpoints in "),s("code",[t._v("main.js")]),t._v(".")]),s("h2",{attrs:{id:"renderer-process"}},[t._v("Renderer Process")]),s("p",[t._v("Making Renderer process work involves more effort, but as most of Electron App's code\nlives in Renderer Process, it is of more interest.")]),s("p",[t._v("First, a high-level explanation as to how we'll make it work. Electron has a launch flag\n"),s("code",[t._v("--remote-debugging-port")]),t._v(", which lets you specify a port for remote debugging. The language\nspoken at this port is "),s("a",{attrs:{href:"https://developer.chrome.com/devtools/docs/debugger-protocol"}},[t._v("Chrome Debugging Protocol")]),t._v(",\nand VS Code has an extension that just handles that: "),s("a",{attrs:{href:"https://marketplace.visualstudio.com/items/msjsdiag.debugger-for-chrome"}},[t._v("Debugger for Chrome")]),t._v(".")]),s("h3",{attrs:{id:"setting-up"}},[t._v("Setting up")]),s("h4",{attrs:{id:"go-to-main-js-and-comment-out-this-line"}},[t._v("Go to "),s("code",[t._v("main.js")]),t._v(" and comment out this line:")]),s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("mainWindow")]),s("span",{staticStyle:{color:"#000000"}},[t._v(".")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("webContents")]),s("span",{staticStyle:{color:"#000000"}},[t._v(".")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("openDevTools")]),s("span",{staticStyle:{color:"#000000"}},[t._v("()")])])])]),s("p",[t._v("Remote debugging doesn't work with multiple DevTools clients. We'll use the debugger in VS Code\ninstead of Electron's DevTools.")]),s("h4",{attrs:{id:"install-debugger-for-chrome"}},[t._v("Install Debugger for Chrome")]),s("p",[t._v("Launch Quick Open, and enter "),s("code",[t._v("ext install debugger-for-chrome")]),t._v(".")]),s("h4",{attrs:{id:"add-a-new-configuration-in-launch-json"}},[t._v("Add a new configuration in "),s("code",[t._v("launch.json")])]),s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("{")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("  ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"version"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"0.2.0"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("  ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"configurations"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": [")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("    {")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"name"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"Debug Renderer Process"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"type"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"chrome"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"request"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"launch"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"runtimeExecutable"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"${workspaceRoot}/node_modules/.bin/electron"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"windows"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": {")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("        ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"runtimeExecutable"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"${workspaceRoot}/node_modules/.bin/electron.cmd"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      },")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"runtimeArgs"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": [")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("        ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"${workspaceRoot}/main.js"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(",")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("        ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"--remote-debugging-port=9222"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ],")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("      ")]),s("span",{staticStyle:{color:"#005CC5"}},[t._v('"webRoot"')]),s("span",{staticStyle:{color:"#000000"}},[t._v(": ")]),s("span",{staticStyle:{color:"#032F62"}},[t._v('"${workspaceRoot}"')])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("    }")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("  ]")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("}")])])])]),s("p",[t._v("Most of the configuration is straightforward. 9222 is the port Debugger for Chrome uses\nby default, and "),s("code",[t._v("webRoot")]),t._v(" tells Debugger for Chrome the location of the source code that\nwe want to debug for.")]),s("h4",{attrs:{id:"add-some-code-to-renderer-js"}},[t._v("Add some code to "),s("code",[t._v("renderer.js")])]),s("pre",{staticClass:"shiki",staticStyle:{"background-color":"#fff"}},[s("code",[s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("console")]),s("span",{staticStyle:{color:"#000000"}},[t._v(".")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("log")]),s("span",{staticStyle:{color:"#000000"}},[t._v("(")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("'hello world!'")]),s("span",{staticStyle:{color:"#000000"}},[t._v(")")])]),t._v("\n\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#24292E"}},[t._v("document")]),s("span",{staticStyle:{color:"#000000"}},[t._v(".")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("body")]),s("span",{staticStyle:{color:"#000000"}},[t._v(".")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("addEventListener")]),s("span",{staticStyle:{color:"#000000"}},[t._v("(")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("'click'")]),s("span",{staticStyle:{color:"#000000"}},[t._v(", () ")]),s("span",{staticStyle:{color:"#D73A49"}},[t._v("=>")]),s("span",{staticStyle:{color:"#000000"}},[t._v(" {")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("  ")]),s("span",{staticStyle:{color:"#24292E"}},[t._v("console")]),s("span",{staticStyle:{color:"#000000"}},[t._v(".")]),s("span",{staticStyle:{color:"#6F42C1"}},[t._v("log")]),s("span",{staticStyle:{color:"#000000"}},[t._v("(")]),s("span",{staticStyle:{color:"#032F62"}},[t._v("'hello vscode!'")]),s("span",{staticStyle:{color:"#000000"}},[t._v(")")])]),t._v("\n"),s("span",{staticClass:"line"},[s("span",{staticStyle:{color:"#000000"}},[t._v("})")])])])]),s("p",[t._v("Now we are ready to go.")]),s("h3",{attrs:{id:"debugging"}},[t._v("Debugging")]),s("p",[t._v("I added two breakpoints in "),s("code",[t._v("renderer.js")]),t._v(", and ran "),s("code",[t._v("Debug Renderer Process")]),t._v(" in the Debug View.")]),s("p"),s("figure",[s("img",{attrs:{src:"/debug-electron-vscode/renderer_process.png",alt:"Renderer Process"}})]),s("p"),s("p",[t._v("Electron will stop on the second breakpoint if I click anywhere in the window:")]),s("p"),s("figure",[s("img",{attrs:{src:"/debug-electron-vscode/renderer_process_click.png",alt:"Renderer Process Click"}})]),s("p"),s("p",[t._v("However, it wouldn't hit the first breakpoint. The reason is Debugger for Chrome would\nfirst launch Electron, and try to attach to the running process to debug it. When it\nsuccessfully attached itself, the first "),s("code",[t._v("console.log")]),t._v(" had already been executed.")]),s("p",[t._v("The solution is to go to the Electron window and press "),s("code",[t._v("cmd+r")]),t._v(" to reload, Electron will\nre-execute the renderer and hit the breakpoint.")]),s("p"),s("figure",[s("img",{attrs:{src:"/debug-electron-vscode/renderer_process_refresh.png",alt:"Renderer Process Refresh"}})]),s("p"),s("h3",{attrs:{id:"transpiling"}},[t._v("Transpiling")]),s("p",[t._v("Most modern Web apps are written in languages that transpile to JavaScript. If sourcemaps are\ngenerated during transpilation, we can debug the original code in VS Code.")]),s("p",[t._v("I modified "),s("a",{attrs:{href:"https://github.com/electron/electron-quick-start"}},[t._v("electron/electron-quick-start")]),t._v("\nto use Babel and Webpack to transpile ES6 code. Here I'm debugging the un-transpiled code:")]),s("p"),s("figure",[s("img",{attrs:{src:"/debug-electron-vscode/es6_debug.png",alt:"ES6 Debug"}})]),s("p"),s("p",[t._v("Details are in this commit: "),s("a",{attrs:{href:"https://github.com/octref/vscode-electron-debug/commit/4bb4a93"}},[t._v("4bb4a93")])]),s("h2",{attrs:{id:"why-all-the-hassle"}},[t._v("Why all the hassle?")]),s("p",[t._v("You get all the nice features in VS Code while debugging, like:")]),s("ul",[s("li",[s("a",{attrs:{href:"https://code.visualstudio.com/docs/editor/editingevolved#_go-to-definition"}},[t._v("Go to Definition")])]),s("li",[s("a",{attrs:{href:"https://code.visualstudio.com/docs/editor/editingevolved#_peek"}},[t._v("Peek definition")])]),s("li",[t._v("Use Vim commands to jump around, thanks to "),s("a",{attrs:{href:"http://aka.ms/vscodevim"}},[t._v("VSCodeVim")])]),s("li",[t._v("Code folding")])]),s("p",[t._v("When inspecting DOM, I still need to go back to Chrome DevTools.\nBut I find myself debugging much faster in VS Code, which I use everyday for coding.")]),s("h2",{attrs:{id:"example-code"}},[t._v("Example Code")]),s("p",[t._v("https://github.com/octref/vscode-electron-debug")]),s("p",[s("a",{attrs:{href:"https://github.com/octref/vscode-electron-debug/issues/new"}},[t._v("Open an issue")]),t._v(" if you have any question.")]),s("hr"),s("ul",[s("li",[t._v("2017-02-18: Updated "),s("code",[t._v("launch.json")]),t._v(" format")]),s("li",[t._v("2017-10-15: VSCode -> VS Code")]),s("li",[t._v("2018-06-10: Updated blog post for Electron 2.0")])])])}],!1,null,null,null);e.default=a.exports}}]);